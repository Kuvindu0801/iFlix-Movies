<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iFlix</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/b93aae0615.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="stylesheet" href="assets/css/browser.css">

</head>

<body>
    <!-- NAVBAR -->

    <div class="navbar">
        <div class="navbar-container">
            <h1 class="logo">iFlix</h1>
        </div>
        <div class="menu-container">
            <ul class="menu-list">
                <a href="index.html">
                    <li class="menu-list-item active">Home</li>
                </a>
                <a href="movies.html">
                    <li class="menu-list-item">Movies</li>
                </a>
                <a href="tvshows.html">
                    <li class="menu-list-item">TV Shows</li>
                </a>
            </ul>
        </div>
        <div class="profile-text-container">
            <span class="profile-text">
                <i class="fa-solid fa-user"></i>Profile</span>

        </div>
    </div>
    <!-- SIDEBAR -->
    <div class="sidebar">
        <a href="index.html"><i class="left-menu-icon fa-solid fa-house"></i></a>
        <a href="trending.html"><i class="left-menu-icon fa-solid fa-fire"></i></a>
        <a href="browse.html"><i class="left-menu-icon fa-solid fa-compass" id="active"></i></a>
        <a href="tvshows.html"><i class="left-menu-icon fa-solid fa-tv"></i></a>
        <a href=""><i class="left-menu-icon fa-solid fa-bookmark"></i></a>

    </div>
    <div class="search-container">
        <input type="text" id="searchInput" placeholder="Search movies..." />
        <button id="searchBtn">Search</button>
    </div>

    <div id="movies" class="movies"></div>




    <script>

        // API KEY
        const apiKey = '2ddc93d4834d63671d94572934ee483b';

        const imageBaseUrl = 'https://image.tmdb.org/t/p/w500';

        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        const moviesContainer = document.getElementById('movies');

        searchBtn.addEventListener('click', () => {
            const query = searchInput.value.trim();
            if (query) {
                searchMovies(query);
            }
        });

        searchInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                searchBtn.click();
            }
        });

        async function searchMovies(query) {
            moviesContainer.innerHTML = 'Loading...';

            try {
                const response = await fetch(
                    `https://api.themoviedb.org/3/search/movie?api_key=${apiKey}&query=${encodeURIComponent(query)}&language=en-US&page=1&include_adult=false`
                );
                const data = await response.json();

                if (data.results.length === 0) {
                    moviesContainer.innerHTML = '<p>No movies found.</p>';
                    return;
                }

                moviesContainer.innerHTML = '';
                data.results.forEach(movie => {
                    const movieEl = document.createElement('div');
                    movieEl.classList.add('movie');

                    const posterPath = movie.poster_path
                        ? imageBaseUrl + movie.poster_path
                        : 'https://via.placeholder.com/500x750?text=No+Image';

                    movieEl.innerHTML = `
        <img src="${posterPath}" alt="${movie.title}" />
        <div class="movie-info">
          <p class="movie-title">${movie.title}</p><p class="movie-date">${movie.release_date || 'Unknown'}</p></div>`;

                    moviesContainer.appendChild(movieEl);
                });
            } catch (error) {
                moviesContainer.innerHTML = '<p>Error loading movies. Try again later.</p>';
                console.error(error);
            }
        }


    </script>

</body>

</html>